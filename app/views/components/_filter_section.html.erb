<% add_app_component_stylesheet("filter-section") %>
<%
  raise ArgumentError, "heading_text is required" unless local_assigns[:heading_text]
  shared_helper = GovukPublishingComponents::Presenters::SharedHelper.new(local_assigns)
  open ||= nil
  status_text ||= ""
  visually_hidden_heading_prefix ||= ""
  heading_level ||= 2
  summary_aria_attributes ||= {}

  component_helper = GovukPublishingComponents::Presenters::ComponentWrapperHelper.new(local_assigns)
  component_helper.add_class("app-c-filter-section")
  component_helper.set_open(open)
%>

<%= tag.details(**component_helper.all_attributes) do %>
  <%= tag.summary class: "app-c-filter-section__summary", aria: summary_aria_attributes do %>
      <%= content_tag("h#{heading_level}", class: "app-c-filter-section__summary-heading") do %>
        <% if visually_hidden_heading_prefix.present? %>
          <span class="govuk-visually-hidden"><%= visually_hidden_heading_prefix %></span>
        <% end %>
        <%= heading_text %>
      <% end %>

      <% if status_text.present? %>
        <span class="app-c-filter-section__summary-status">
          <%= status_text %>
        </span>
      <% end %>
  <% end %>
  <div class="app-c-filter-section__content">
    <%= yield %>
  </div>
<% end %>
